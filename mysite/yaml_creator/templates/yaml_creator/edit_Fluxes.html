
set a Flux 
{{ modeldescriptor.filename }}<br> 
{{ modeldescriptor.cs}}<br> 
<!--
{{ flstr|escapejs }}<br>
{{ fluxes}}
-->
<script>
	function update(select_id,div_id){
		var div_target=document.getElementById(div_id);
		var ids=document.getElementById(select_id);
		var ts=ids.cloneNode(true);
		var selind=ids.selectedIndex;
		document.getElementById('demo_selind').innerHTML=selind;
		ts.remove(selind);
	    	l=div_target.childNodes.length;
	    	document.getElementById("demo_l").innerHTML = l;
	    	if (l > 0){
	    	    oldf=div_target.childNodes[0]
	    	    div_target.replaceChild(ts,oldf);
	    	}
	    	if (l = 0){
	    	    div_target.appendChild(ts);
	    	}
	};

	function main(){
		//var tn =document.createTextNode('BBLLAA');
		//var tn2 =document.createTextNode('BBLLAA');
		//document.body.appendChild(tn)
		//document.body.appendChild(tn2)
		//var se=[tn,tn2];
		tup=['A','B'];
		var se=pool_select(tup);
		se.forEach(myAppend);
		//var tuples=JSON.parse("{{ flstr|escapejs }}");
		//for (i=0; i <tuples.length;i++){
		//	//tn(tuples[i]);
		//	//var se=pool_select(tuples[i]);			
		//	var se=[document.createTextNode('BBLLAA')]
		//	se.forEach(document.body.appendChild);
		//}
		////tn([1,2]);
	};

	function getButton(){
	  var b = document.createElement("BUTTON");
		b.setAttribute('value','Test')
		document.body.appendChild(b);
	};
	function myAppend(item,index){
		document.body.appendChild(item);
	};
	function pool_select(tup){
		var source = tup[0];
		var target = tup[1];
		//var se = document.createElement("SELECT");
		var st = document.createTextNode(source);
		var tt = document.createTextNode(target);
		//var st =document.createTextNode('BBLLAA');
		//var tt  =document.createTextNode('BBLLAA');
		return [st,tt] ;
		//tuples.forEach(tn);
	}
	function getForm(source){
		var x = document.getElementById("sourceSelect");
		var s = x.cloneNode(true);
		s.remove(x.selectedIndex)
		s.name="Target"
		var d=document.getElementById(source);
		var l=d.childNodes.length;
	  var b = document.createElement("BUTTON");
	  var submit = document.createElement("INPUT");
		submit.setAttribute("type","submit")
		submit.setAttribute("value","add Flux")
		if (l == 1){
			d.appendChild(s);
		  //d.appendChild(submit);
		}
		if (l > 1){
			var oldf=d.childNodes[1];
			d.replaceChild(s,oldf);
		}
	}
document.onload=main();
</script>
<p id="demo"></p>
<form id="sourceForm" action="{% url 'set_Fluxes' modeldescriptor.filename %}" method="post">
	{% csrf_token %}
 <table style="width:50%">
  <tr>
    <th>Source</th>
    <th>Target</th>
  </tr>
	{% for f in fluxes %}
  <tr>
    <td>
			<select id="sourceSelect_{{f}}" name='Source' oninput="update('sourceSelect_{{f}}','targetDiv_{{f}}')">
				{% for p in pool_names%}
					<option> {{ p }}</option> 
				{% endfor %}
			</select>
    </td>
    <td>
			<div id="targetDiv_{{f}}">
				<select id="TargetSelect_{{f}}" name='Source' >
					{% for p in pool_names%}
						<option> {{ p }}</option> 
					{% endfor %}
				</select>
			</div>
  </tr>i
	{% endfor %}
 </table> 	
<input type="submit" value="set fluxes pool">
</form>
<div id="demo_selind"> </div>
<div id="demo_l"> </div>
