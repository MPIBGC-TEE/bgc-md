<!DOCTYPE html>
<html>
	<head>
		<script>
		var names=['x_1','x_2','x_3','x_4'];
		var div1=document.getElementById('targetDiv22');
		var ss2=document.getElementById('sourceSelect2');
		function addFilledFluxForm(names,tupel,target_ids) {
			var div_source_id=target_ids[0];
			var div_target_id=target_ids[1];
			var selected_source=tupel[0];
			var selected_target=tupel[1];
			function filterfun(val){return val!=selected_source};
			var ss=createSelect(names,selected_source);
			var ts=createSelect(names.filter(filterfun),selected_target);
			var div_target=document.getElementById(div_target_id);
			//function update(){
			//	update_connected_select_field(ss,div_target);
			//	//addForm(names,'x_3','targetDiv22');
			//};
			//ss.setAttribute("onchange",update_connected_select_field(ss,div_target));
			//ss.setAttribute("onchange",update());
		    	var div_source = document.getElementById(div_source_id);
		    	div_source.appendChild(ss);
		    	div_target.appendChild(ts);
		}
		function update_connected_select_field(ids,div_target){
			var ts=ids.cloneNode(true);
			ts.remove(ids.selectedIndex);
			var oldf=div_target.childNodes[1];
			div_target.replaceChild(ts,oldf);

		};
		function addForm(names,selected_value,target_id) {
			var x=createSelect(names,selected_value);
		    	document.getElementById(target_id).appendChild(x);
		}
		function createSelect(names,selected_value) {
		    
		    var x = document.createElement("SELECT")
		    x.setAttribute('id','targetSelect');
		    var txt = "";
		    var i;
		    for (i = 0; i < names.length; i++) {
			var item=names[i];
		        var o = document.createElement("OPTION");
			o.setAttribute("value",item);
		        var t=document.createTextNode(item);
			o.appendChild(t);
			x.appendChild(o);
		    }
		    x.selectedIndex=names.indexOf(selected_value);
		    return x;
		}
	
		</script>
	</head>
<body>
	<form id="sourceForm">
	<select id="sourceSelect" onchange=addForm(names,'x_3','targetDiv22')>
	  <option>C_1</option>
	  <option>C_2</option>
	  <option>C_3</option>
	  <option>C_4</option>
	</select>

	<select id="sourceSelect2" onchange=update_connected_select_field(ss2,div1)>
	  <option>x_1</option>
	  <option>x_2</option>
	  <option>x_3</option>
	  <option>x_4</option>
	</select>

	<input type="button" onclick="addFilledFluxForm(names,['x_1','x_2'],['targetDiv11','targetDiv12'])" value="createSelectFromArray">
	<input type="button" onclick="addForm(names,'x_2','targetDiv22')" value="createSelectFromArray">
	</form>
	
		

 <table style="width:50%">
  <tr>
    <th>Source</th>
    <th>Target</th>
    <th>Age</th>
  </tr>
  <tr>
    <td><div id="targetDiv11"> </div></td>
    <td><div id="targetDiv12"> </div></td>
    <td><div id="targetDiv13"> </div></td>
  </tr>
    <td><div id="targetDiv21"> </div></td>
    <td><div id="targetDiv22"> </div></td>
    <td><div id="targetDiv23"> </div></td>
  <tr>
  </tr>
</table> 	
	
</body>
</html>


